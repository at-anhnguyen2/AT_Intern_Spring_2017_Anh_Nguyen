<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" type="text/css" href="css/style.css">
  <title>HOME</title>
</head>
<body>
  <!-- header -->
  <header class="header">
    <div class="header-logo">
      <img src="img/logo.png" alt="LOGO">
    </div>
    <div>
      <div class="right-header">
        <img src="img/telephone.png" alt="TEL">
        <div>
          <p>Chăm sóc khách hàng</p>
          <p class="phone-number">1900 6068</p>
        </div>
        <img src="img/com.png" alt="COM">
        <div>
          <p>Chăm sóc khách hàng ngoài giờ</p>
          <p>
            <span>Khách sạn:</span>
            <span class="phone-number">0906 636 171</span> 
            <span>/ Tour:</span> 
            <span class="phone-number">0938 238 004</span></p>
        </div>
      </div>
      <nav class="top-menu">
        <a href="#">TRANG CHỦ</a>
        <a href="#">VỀ HADATOUR</a>
        <a href="#">TOUR</a>
        <a href="#">KHÁCH SẠN</a>
        <a href="#">CHO THUÊ PHƯƠNG TIỆN</a>
        <a href="#">VÉ MÁY BAY</a>
        <a href="#">TIN TỨC</a>
        <a href="#">LIÊN HỆ</a>
      </nav>
    </div>
  </header>
  <!-- banner -->
  <section class="banner">
    <div class="banner-text">
      <p>trải nghiệm thú vị</p> 
      <p class="line2">Thoả sức khám phá</p>
    </div>
  </section>

  <!-- content -->
  <section class="content">
    <h1>TOUR</h1>
    <div class="categories">
      <div class="item-category" category-text="Tour nổi bật">
        <!-- Tour nổi bật -->
      </div>
      <div class="item-category" category-text="Tour nước ngoài">
        <!-- Tour nước ngoài -->
      </div>
      <div class="item-category" category-text="Tour trong nước">
        <!-- Tour trong nước -->
      </div>
    </div>
    <main>
      <div class="container">
        <img src="img/img-detail.png" alt="Image">
        <div>
          <p class="tour-name">Tour 01</p>
          <p>
            <span>Giá Tour: </span>
            <span class="price">3.500.000 VNĐ</span>
          </p>  
        </div>
        <button type="button" name="btn" class="book-btn" id="btn1">Book</button>
      </div>
      <div class="container">
        <img src="img/img-detail.png" alt="Image">
        <div>
          <p class="tour-name">Tour 02</p>
          <p>
            <span>Giá Tour: </span>
            <span class="price">4.200.000 VNĐ</span>
          </p>  
        </div>
        <button type="button" name="btn" class="book-btn" id="btn2">Book</button>
      </div>
      <div class="container">
        <img src="img/img-detail.png" alt="Image">
        <div>
          <p class="tour-name">Tour 03</p>
          <p>
            <span>Giá Tour: </span>
            <span class="price">5.000.000 VNĐ</span>
          </p>  
        </div>
        <button type="button" name="btn" class="book-btn" id="btn3">Book</button>
      </div>
      <div class="container">
        <img src="img/img-detail.png" alt="Image">
        <div>
          <p class="tour-name">Tour 04</p>
          <p>
            <span>Giá Tour: </span>
            <span class="price">5.500.000 VNĐ</span>
          </p>  
        </div>
        <button type="button" name="btn" class="book-btn" id="btn4">Book</button>
      </div>
      <div class="container">
        <img src="img/img-detail.png" alt="Image">
        <div>
          <p class="tour-name">Tour 05</p>
          <p>
            <span>Giá Tour: </span>
            <span class="price">3.500.000 VNĐ</span>
          </p>  
        </div>
        <button type="button" name="btn" class="book-btn" id="btn5">Book</button>
      </div>
      <div class="container">
        <img src="img/img-detail.png" alt="Image">
        <div>
          <p class="tour-name">Tour 06</p>
          <p>
            <span>Giá Tour: </span>
            <span class="price">4.200.000 VNĐ</span>
          </p>  
        </div>
        <button type="button" name="btn" class="book-btn" id="btn6">Book</button>
      </div>
      <div class="container">
        <img src="img/img-detail.png" alt="Image">
        <div>
          <p class="tour-name">Tour 07</p>
          <p>
            <span>Giá Tour: </span>
            <span class="price">5.000.000 VNĐ</span>
          </p>  
        </div>
        <button type="button" name="btn" class="book-btn" id="btn7">Book</button>
      </div>
      <div class="container">
        <img src="img/img-detail.png" alt="Image">
        <div>
          <p class="tour-name">Tour 08</p>
          <p>
            <span>Giá Tour: </span>
            <span class="price">5.500.000 VNĐ</span>
          </p>  
        </div>
        <button type="button" name="btn" class="book-btn" id="btn8">Book</button>
      </div>
      <div class="container">
        <img src="img/img-detail.png" alt="Image">
        <div>
          <p class="tour-name">Tour 09</p>
          <p>
            <span>Giá Tour: </span>
            <span class="price">3.500.000 VNĐ</span>
          </p>  
        </div>
        <button type="button" name="btn" class="book-btn" id="btn9">Book</button>
      </div>
      <div class="container">
        <img src="img/img-detail.png" alt="Image">
        <div>
          <p class="tour-name">Tour 10</p>
          <p>
            <span>Giá Tour: </span>
            <span class="price">4.200.000 VNĐ</span>
          </p>  
        </div>
        <button type="button" name="btn" class="book-btn" id="btn10">Book</button>
      </div>
      <div class="container">
        <img src="img/img-detail.png" alt="Image">
        <div>
          <p class="tour-name">Tour 11</p>
          <p>
            <span>Giá Tour: </span>
            <span class="price">5.000.000 VNĐ</span>
          </p>  
        </div>
        <button type="button" name="btn" class="book-btn" id="btn11">Book</button>
      </div>
      <div class="container">
        <img src="img/img-detail.png" alt="Image">
        <div>
          <p class="tour-name">Tour 12</p>
          <p>
            <span>Giá Tour: </span>
            <span class="price">5.500.000 VNĐ</span>
          </p>  
        </div>
        <button type="button" name="btn" class="book-btn" id="btn12">Book</button>
      </div>
      
    </main>
  </section>

  <!-- book tour -->
  <div class="tour-booked">
    <h3>Number of tour <br>booked</h3>
    <p id="number-of-tour">
      
    </p>
  </div>

  <div class="tour-booked-info">
    <table class="table">
    <caption>BOOKED TOUR LIST</caption>
      <thead>
        <tr>
          <th class="th1">Tour name</th>
          <th class="th2">Unit Price</th>
          <th class="th3">Quantity</th>
          <th class="th4">Sub Total</th>
        </tr>
      </thead>
      <tfoot>
        <tr>
          <td colspan="2">Total</td>
          <td id="total-tour"></td>
          <td id="total-price"></td>
        </tr>
      </tfoot>
      <tbody id="show-tour">
        <!-- table content -->
        
      </tbody>
    </table>
    <button type="button" id="btn-back"> < Back </button>
    <button type="button" id="btn-pay">Pay</button>
  </div>

  <!-- footer -->
  <footer class="footer">
    <div class="contact">
      <div class="footer-logo">
        <img src="img/logo.png" alt="LOGO">
      </div>
      <div class="info">
        <h3>THÔNG TIN</h3>
        <p>Giới thiệu về HadaTour</p>
        <p>Thông tin liên hệ</p>
        <p>Điều khoản thành viên</p>
        <p>Phương thức thanh toán</p>
        <p>Tuyên dụng</p>
      </div>
      <div class="community">
        <h3>CỘNG ĐỒNG</h3>
        <p>Facebook</p>
        <p>Google+</p>
        <p>Twitter</p>
        <p>Youtube</p>
      </div>
      <div class="input-email">
        <p>Nhập Email để nhận giá tốt từ HadaTour</p>
        <div>
          <input type="text" placeholder="Nhập địa chỉ Email">
          <button type="button">ABC</button>
        </div>
      </div>
    </div>
    <div class="license">
      <div>2015 - Bản quyền thuộc về HadaTour</div>
    </div>
  </footer>

  <!-- Script -->
  <script type="text/javascript">
    var $btn = document.getElementsByName('btn');
    var $numberOfTour = document.getElementById('number-of-tour');
    var $tourName = document.getElementsByClassName('tour-name');
    var $tourPrice = document.getElementsByClassName('price');
    var $arrayIsBooked = [];
    var $arrayTourBooked = [];

    // load local Storage
    if(typeof(Storage) !== "undefined"){
      checkLocalStorage();
      loadLocalStorage();
      updateLocalStorage();
    }
    else{
      alert("Brower does not support web storage...");
    }

    function checkLocalStorage(){
      if(!localStorage.countTour){
        localStorage.countTour = 0; 
      }
      if (!localStorage.isTourBooked) {
        for (var i = 0, len = $btn.length; i < len; i++) {
          $arrayIsBooked.push(false);
        }
        localStorage.isTourBooked = JSON.stringify($arrayIsBooked);
      }
      if (!localStorage.listTour) {
        localStorage.listTour = JSON.stringify($arrayTourBooked);
      }
    }

    function loadLocalStorage(){
      $numberOfTour.innerHTML = localStorage.countTour;
      $arrayIsBooked = JSON.parse(localStorage.isTourBooked);
      $arrayTourBooked = JSON.parse(localStorage.listTour);
    }

    function updateLocalStorage(){
      for (var i = 0, len = $btn.length; i < len; i++) {
        $btn[i].addEventListener('click', function(e) {
          j = String(e.target.id).substring(3);
          j = Number(j) - 1;
          if($arrayIsBooked[j] == false){
            localStorage.countTour = Number(localStorage.countTour) + 1;
            $arrayIsBooked[j] = true;
            $tourHash = {name: $tourName[j].innerHTML, price: $tourPrice[j].innerHTML};
            $arrayTourBooked.push($tourHash);
          }
          $numberOfTour.innerHTML = localStorage.countTour;
          localStorage.isTourBooked = JSON.stringify($arrayIsBooked);
          localStorage.listTour = JSON.stringify($arrayTourBooked);
        });
      }
    }

    // click number of tour
    var $tableTourBooked = document.getElementsByClassName('tour-booked-info');
    $numberOfTour.addEventListener('click', function() {
      $tableTourBooked[0].style.visibility = "visible";
      // var $body = document.getElementById('body');
    });

    var $pay = document.getElementById('btn-pay');
    $pay.addEventListener('click', function() {
      alert("Paying Success!!!!");
      $tableTourBooked[0].style.visibility = "hidden";
      localStorage.clear();
    });
  </script>
</body>
</html>